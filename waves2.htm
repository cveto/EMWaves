<!DOCTYPE html>
<html>

<script>
var fgreen=565;		// THz 10^12
var fred=442.5;		// THz 10^12
var fblue=640;		// THz 10^12


var c0=2.99792458			// *10^8 			300 000 000 m/s

var n1=1;
var n2=1.6;

//  wave1[xstart0,ystart1,xrotate2,yrotate3,angle4,raylength5,wavelength6,frequency7,Amplitude8,refractiveIndex9]
var wave1=[30,  30,  30,  30,  45, 11, "empty",   fgreen, 10,1];		// By default 2 and 3 are set to 1 and 2
var wave2=[418, 418, 100, 100, 70, 11, "empty",   fblue,  10,1.6]		// by default 2 and 3 are ignored

var ctx;
var resolution=20; 		// dots per period
var t=0;
var yPrev=0;





function init() {
	ctx= myCanvas.getContext('2d');
	setInterval(draw,1);	 				// 1 Calls function draw 40 times a...? Well often.	
	//draw();
}

function drawRay(wave,ctx) {
	var fTHz=wave[7];
	var fEHz=wave[7]/1000/1000;						// In EksaHerz
	
	var n=wave[9];

	var xStart=wave[0];
	var yStart=wave[1];
	
	var angle=wave[4];
	var lambda1=c0/n/fTHz*100							// micrometers

	var w1=2*Math.PI*fEHz;				//
	var Amp=wave[8];

	var rotatex = wave[0];
	var rotatey = wave[1];
	var numPeriodsToDraw=wave[5]/lambda1;

	// start drawing where?
	ctx.moveTo(wave[0],wave[1]);	

	// rotate arouund where?
	ctx.translate(rotatex,rotatey);		
	ctx.rotate(angle * Math.PI / 180);
	ctx.translate(-rotatex,-rotatey);
	
	for (var x=0;x<=numPeriodsToDraw*resolution;++x) {

		var k1 = 2*Math.PI/resolution;
		var dx=x*lambda1/resolution*50
		var f1=yStart+Amp*Math.sin(k1*x-w1*t);		// Equation
		ctx.lineTo(xStart+dx,f1);
	}
	
	// Rotate K.O. back
	ctx.translate(rotatex,rotatey);
	ctx.rotate(-angle * Math.PI / 180);
	ctx.translate(-rotatex,-rotatey);
	

}

function draw() {
	var c = document.getElementById("myCanvas");
	var ctx = c.getContext("2d");
	
	ctx.beginPath();
	
	ctx.rect(0, 415, 5000, 450);
	drawRay(wave1,ctx);
	drawRay(wave2,ctx);
	
	// Clear Image

	ctx.clearRect(0,0, 3000,3000);

	ctx.stroke();
	
	t+=1;
}


function move_zeros()	{
		arr_wave1.splice(0,0,0);		// Moves array to right by adding zeros at the beginning
		arr_wave1.splice(-1,1)			// Deletes last one
		document.getElementById("meh").innerHTML = arr_wave1;
}	
</script>

<body onLoad="init();">

<canvas id="myCanvas" width="3000" height="3000" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>



</script> 

</body>
</html>
